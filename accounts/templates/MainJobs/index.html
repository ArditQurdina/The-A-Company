{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- <link rel="stylesheet" href="{% static 'css/profile-headers.css'%}"> -->
<link rel="stylesheet" href="{% static 'css/jobs.css' %}">
<link rel="stylesheet" href="{% static 'css/profile-header.css' %}">
<link rel="stylesheet" href="{% static 'css/posted-jobs-media-queries.css'%}">
<link rel="stylesheet" href="{% static 'css/jobs-1.css'%}">
<style>
    body {}

    .jobs-buttons {
        /* position: relative; */
    }

    .form-group {}

    .multiselect {}

    .container-fluid {}

    .selectBox {}

    .selectBox select {}

    .overSelect {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
    }


    #mySelectOptions::-webkit-scrollbar {
        display: none;
    }

    #mySelectOptions label {
        display: block;
        font-weight: normal;
        white-space: nowrap;
        min-height: 1.2em;
        background-color: #ffffff00;
        padding: 0px 20px;
        /* padding: .375rem 2.25rem .375rem .75rem; */
    }

    #mySelectOptions label:hover {}

    .search-input::placeholder {
        color: #b1b2b8;
        font-size: 18px;
    }

    .input-form {}

    .buttons-form {}

    .search-input {
        padding-top: 8px;
        padding-bottom: 8px;
        border-radius: 20px;
        border: none;
        padding-left: 20px;
        font-size: 18px;
        padding-right: 20px;
        width: 200px;
        color: #65676B;
        outline: none;
    }

    .search-input {
        transition: all 0.5s ease-in-out;
        display: none;
    }

    #mySelectOptions {
        border-bottom-left-radius: 16px;
        border-top-left-radius: 16px;
        border: none;
        box-sizing: border-box;
        cursor: auto;
        /* transition: all 0.5s ease-in-out; */
        margin-top: 10px;
        -webkit-box-shadow: 0 0 5px #e7e7e7;
        box-shadow: 0 0 5px #e7e7e7;
        position: absolute;
        top: 100%;
        display: none;
        background-color: #ffffff;
        max-height: 140px;
        overflow-y: scroll !important;
        z-index: 2;
        border-radius: 16px;
    }

    .labels-stats {
        font-size: 18px;
        color: #65676B;
        margin-bottom: 20px;
        padding-left: 0px;
        padding-right: 0px;
        cursor: pointer;
        display: inline-block;
    }

    .first-label-margin {
        margin-top: 20px;
    }

    input[type=checkbox] {
        accent-color: white;
        border: none;
    }

    .input-form {}

    .scrolling-wrapper {
        overflow-x: auto;
    }

    .scrolling-wrapper::-webkit-scrollbar {
        display: none;
    }

    .card {
        display: inline-block;
        flex: 0 0 auto;
    }

    .scrolling-wrapper-flexbox {
        display: flex;
        flex-wrap: nowrap;
    }

    .button-dropdown {}
</style>

{% include "Filters/filters.html" %}
<div class="jobs-main-div" style="display: flex; justify-content: space-between;">
    {% include "Filters/index.html" %}
    <div class="right-jobs-main-div">
        <div class="right-jobs" id="detailsRow" style="display:none;flex-direction: column;">
            <div class="right-jobs-rows-img" style="padding: 30px; margin-left: 10px; background-color: white;">
                <div class="experience-rows">
                    <img class="exit-job-description" title="Exit" style="float: left; width: 22px; height: 22px;"
                        src="{% static 'img/Vector 81 (1).png'%}" alt="">
                    <div class="first-row-jobs">
                        <p class="" id="job_title"></p>
                    </div>
                    <div class="second-row-jobs"><span id="company"></span>&nbsp;&nbsp;<span style="color: #858585;"
                            id="city"> &nbsp;&nbsp;</span><span id="countApplicant" style="color:gray"></span></div>
                    <div style="" class="experience-third-row jobs-third-row"><span
                            id="salary">{{jobi.salary_per_hour}}</span></div>
                    <div style="" class="experience-fourth-row jobs-mutual-margin-rows"><span id="typeOfWork"></span>
                        <span id="hourPerWork"></span>
                    </div>
                    <div style="margin-top: 20px;" class="experience-fourth-row jobs-mutual-margin-rows" id="sDate">
                    </div>
                    <div style="margin-top: 5px; margin-top: 20px;" class="experience-fourth-row jobs-mutual-margin-rows">
                        <span id="housing">{{ jobi.housing}}</span><span id="housingCost">{{
                            jobi.housing_cost_per_week}}</span>
                    </div>
                    <div style="margin-top: 5px; margin-top: 20px;" class="experience-fourth-row jobs-mutual-margin-rows">
                        <span id="program">{{jobi.program}}</span><span id="programCost">{{jobi.programCost}}</span>
                    </div>
    
                    <div id="button" style="margin-top:25px">
                    </div>
                </div>
            </div>
            <div class="right-jobs-rows-img-second">
                <div class="col-5">
                    <textarea rows="50" cols="100" id="message" class="scroll" disabled>
                    </textarea>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    async function getNumber(id,appplicants) {


        var elements = document.getElementsByClassName('pixel'); // get all elements

        for(var i = 0; i < elements.length; i++){
            elements[i].style.backgroundColor = "white";
        }

        post_id=id

    
        console.log("post__id="+post_id)
        let response = await fetch('',{

            method: "get",

            headers: {
                "X-Requested-With": "XMLHttpRequest",
                "Content-Type": 'application/json',
                text: post_id,
            }

        }

        )

        let data = await response.json()

        var element = document.getElementById("detailsRow");

        if (element) {
            var display = element.style.display;

            if (display == "none") {
                element.style.display = "flex";
            }
        }
        if(id != 0){
            var select = document.getElementById('select'+id)
            select.style.backgroundColor = "#E7F1FE";
        }

        if(id == 0){
            id=data["post_id"]
            var select = document.getElementById('select'+id)
            select.style.backgroundColor = "#E7F1FE";
        }


        let textarea = document.getElementById('message')
        textarea.value = ""
        textarea.value += data["description"]


        var element = document.getElementById("job_title");
        element.innerHTML = data["title"]

        var city_jobs = document.getElementById("city")
        city_jobs.innerHTML = data ["city_j"]+",  "+data["country"]

        if(appplicants != null){

        var countApplicant = document.getElementById("countApplicant")
        countApplicant.innerHTML = " · "+appplicants+"  -  Applicant"
        }else{
            var countApplicant = document.getElementById("countApplicant")
        countApplicant.innerHTML = " ·  "+data["applicant"]+"  -  Applicant"
        }

        var start_date = document.getElementById("sDate")
        start_date.innerHTML = data["start_date"]+" - "+data["end_date"]

        var company = document.getElementById("company")
        company.innerHTML = data["company"]

        var salary = document.getElementById("salary")
        salary.innerHTML ="$"+ data ["salary"]+"/hour"

        var typeOfWork = document.getElementById('typeOfWork')
        typeOfWork.innerHTML = data["typeOfWork"]

        var hourPerWork = document.getElementById('hourPerWork')
        hourPerWork.innerHTML = " · "+data['hourPerWork']+" hours/week"

        var housing = document.getElementById("housing")
        housing.innerHTML = "Housing "+data['housing']

        var housingCost = document.getElementById("housingCost")
        housingCost.innerHTML = " ·  $"+data["housingCost"]+"/week"

        var program = document.getElementById('program')
        program.innerHTML = data["program"]

        var programCost = document.getElementById("programCost")
        programCost.innerHTML = "· Program Cost: $"+data["programCost"]
        var button = document.getElementById("button")
        var url= "apply/"+id
        button.innerHTML = '{% if user.profileSetup %}<a href="'+url+'" class="applied-button-jobs outline-none" style="text-decoration:none;margin-top: 5px; width: fit-content; padding-top: 8px; padding-bottom: 8px;">Fast Apply</a>{% else %}<a href="'+url+'" class="applied-button-jobs outline-none" style="text-decoration:none;margin-top: 5px; width: fit-content; padding-top: 8px; padding-bottom: 8px;">Apply</a>{% endif %}';


        var firstMediaQuery = window.matchMedia('(min-width: 768px');
        const mediaQuery = window.matchMedia('(max-width: 767px)');
        var right_jobs_main_div = document.querySelector('.right-jobs-main-div');
        var jobs_left = document.querySelector('.jobs-left');
        var jobs_buttons = document.querySelector('.jobs-buttons');

        if (mediaQuery.matches) {
                right_jobs_main_div.style.display = "flex";
                jobs_left.style.display = "none";
                jobs_buttons.style.display = "none";
                if(id==0){
                var select = document.getElementById('select'+id)
                select.style.backgroundColor = "white";
                }
        }
        ;
    }


        var nul = "";

        var firstMediaQuery = window.matchMedia('(min-width: 768px');
        const mediaQuery = window.matchMedia('(max-width: 767px)');
        var right_jobs_main_div = document.querySelector('.right-jobs-main-div');
        var jobs_left = document.querySelector('.jobs-left');
        var jobs_buttons = document.querySelector('.jobs-buttons');

        if (mediaQuery.matches) {
                right_jobs_main_div.style.display = "none";
                jobs_left.style.display = "flex";
                jobs_buttons.style.display = "flex";
                if(id==0){
                var select = document.getElementById('select'+id)
                select.style.backgroundColor = "white";
                }
        };
        window.onload = getNumber(nul);

</script>

<script src="{% static 'js/profile_dropdown.js'  %}"></script>
<script src="{% static 'js/js.js'  %}"></script>
<script src="{% static 'js/jobs-img.js' %}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
<script src="{% static 'js/exit-job-description-button.js'%}"></script>
<script src="{% static 'js/second-next.js'%}"></script>
<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
<script src="{% static 'js/search-button.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
<script src="{% static 'js/dropdown-jobs.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.2/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>





{% endblock content %}