{% load static %}

    {% for i in job %}
    <div onclick="getMyJobs('{{i.job_id.id}}');showRightJobsMainDiv();" class="job-left-row pixel move"  id="select{{i.job_id.id}}">
        <img class="job-logo" src="{{i.job_id.logo.url}}" alt="">
        <div class="job-left-content">
            <div class="job-left-title">{{i.job_id.job_title}}</div>
            {% if i.country_j == "USA" %}
            <div class="job-left-salary job-left-details">${{i.job_id.salary_per_hour|floatformat:2}}/hour{%if i.tips %} + tips {% endif %} </div>
            {% else %}
            <div class="job-left-salary job-left-details">â‚¬{{i.job_id.salary_per_hour|floatformat:2}}/hour{%if i.tips %} + tips {% endif %}</div>
            {% endif%}
            <div class="job-left-company job-left-details">{{i.job_id.company}}</div>
            <div class="job-left-details">{{i.job_id.city_j}}, {{i.job_id.country_j}}</div>
        </div>
    </div>

    {% endfor %}
<script>
    function searchMyJobs() {
        var input = document.getElementById("searchInput");
        var filter = input.value.toLowerCase();

        {% for i in job %}
            var jobTitle = "{{ i.job_id.job_title }}".toLowerCase();
            var city = "{{ i.job_id.city_j }}".toLowerCase();
            var country = "{{ i.job_id.country_j }}".toLowerCase();
            var jobElement = document.getElementById("select{{i.job_id.id}}");

            if (jobTitle.includes(filter) || city.includes(filter) || country.includes(filter)) {
                jobElement.style.display = "flex";
                if (jobElement === document.querySelector('.job-left-row:first-child')) {
                    jobElement.style.marginTop = "0";
                }
            } else {
                jobElement.style.display = "none";
            }
        {% endfor %}
    }
</script>