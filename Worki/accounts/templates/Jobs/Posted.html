{% extends 'base.html'%}
{% load static %}
{% block content %}
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Jobs</title>
<link rel="stylesheet" href="{% static 'css/authenticated.css'%}">
<link rel="stylesheet" href="{% static 'css/jobs.css'%}">
<link rel="stylesheet" href="{% static 'css/profile-header.css'%}">
<div class="jobs-main-div" style="display: flex; justify-content: space-between; width: 100%;">
    <div class="jobs-left" style="display: flex; flex-direction: column; width: 50%; position: relative;">
        {% for i in job %}


        <a onclick="getNumber({{i.id}})"  class="experience-rows" style="text-decoration: none;">
           
            <div class="jobs-rows-img"
                style="padding: 30px 0px 30px 30px; margin-right: 10px; margin-top: 20px; background-color: white;">
                <img class="experience-education-img" src="{{i.logo.url}}" alt="">
                <img title="Edit Job"
                    style="width: 30px; height: 30px; position: absolute; right: 0; margin-right: 40px;"
                    src="{% static 'img/Ikona_edit-01 56.png'%}" alt="">
                <div class="experience-rows">
                    <div class="experience-first-row">{{i.job_title}}</div>
                    <div class="experience-second-row">{{i.company}}</div>
                    <div class="experience-third-row">{{i.city_j}}, {{i.city_j.country}}</div>
                    <div class="experience-fourth-row">50 applicants · {{i.status}}</div>
                    <div class="experience-fourth-row" style="display: none;" id="idd">{{i.id}}</div>
                </div>
            </div>
        </a>

        {% endfor %}


    </div>
    <div class="right-jobs" id="detailsRow" style="display:none; flex-direction: column; width: 50%;">
        <div class="right-jobs-rows-img"
            style="padding: 30px 0px 30px 30px; margin-left: 10px; background-color: white;">
            <div class="experience-rows">
                <div class="first-row-jobs">
                    <p class="" id="job_title">asd</p>
                </div>
                <div class="second-row-jobs">{{jobId.company}}&nbsp;&nbsp;<span
                        style="color: #858585;" id="city">·&nbsp;&nbsp;&nbsp;·&nbsp;23
                        applicants</span></div>
                <div style="" class="experience-third-row jobs-third-row">${{jobId.salary_per_hour}}/hour</div>
                <div style="" class="experience-fourth-row jobs-mutual-margin-rows">{{jobId.type_of_work}} ·
                    {{jobId.hour_per_work}} hours/week</div>
                <div style="margin-top: 20px;" class="experience-fourth-row jobs-mutual-margin-rows" id="sDate">
                    {{jobId.start_date|date:'d-m-Y'}} - {{jobId.end_date|date:'d-m-Y'}}</div>
                <div style="margin-top: 5px; margin-top: 20px;" class="experience-fourth-row jobs-mutual-margin-rows">
                    {{jobId.housing}} · ${{jobId.housing_cost_per_week}}/week</div>
                <div style="margin-top: 5px; margin-top: 20px;" class="experience-fourth-row jobs-mutual-margin-rows">
                    {{jobId.program}} · Program Cost: ${{jobId.programCost}}</div>
                <div style="margin-top: 5px; margin-top: 20px; height: 100%;"
                    class="experience-fourth-row jobs-mutual-margin-rows">Posted on: {{jobId.postDate|date:'d-m-Y'}}
                </div>
            </div>
        </div>
        <div class="right-jobs-rows-img-second"
            style="padding: 30px 0px 0px 30px; margin-left: 10px; background-color: white; margin-top: 20px;">

            <div class="second-row-second-div">
                <div style="padding-bottom: 10px;">

                    <div class="col-5">
                        <textarea rows="50" cols="100" id="message" class="scroll" disabled>

                        </textarea>
                    </div>

                </div>



            </div>
        </div>
    </div>


</div>
<div class="row">

    <div class="col-5">
        <ul id="right"></ul>
    </div>
</div>
<!-- <script src="{% static 'js/main.js'%}"></script> -->
<script>
    async function getNumber(id) {
        post_id = id
        console.log(id)
        let response = await fetch('',{
            
            method: "get",
    
            headers: {
                "X-Requested-With": "XMLHttpRequest",
                "Content-Type": 'application/json',
                text: id,
            }
                  
        }
        
        )
        console.log(post_id)
        let data = await response.json()

        var element = document.getElementById("detailsRow");

        if (element) {
            var display = element.style.display;

            if (display == "none") {
                element.style.display = "block";
            }
        }


        console.log(data)

        let textarea = document.getElementById('message')
        textarea.value = ""
        textarea.value += data["number"]
        var element = document.getElementById("job_title");
        element.innerHTML = data["title"]
        var city_jobs = document.getElementById("city")
        city_jobs.innerHTML = data ["city_j"]
        var start_date = document.getElementById("sDate")
        start_date.innerHTML = data["start_date"]+" - "+data["end_date"]
        

    }
</script>


{% endblock content%}